class Solution {
    public int maxEnvelopes(int[][] e){
        Arrays.sort(e,(a,b)->a[0]==b[0]?b[1]-a[1]:a[0]-b[0]);
        int[] dp=new int[e.length];
        int len=0;
        for(int[] x:e){
            int i=Arrays.binarySearch(dp,0,len,x[1]);
            if(i<0) i=-(i+1);
            dp[i]=x[1];
            if(i==len) len++;
        }
        return len;
    }
}
